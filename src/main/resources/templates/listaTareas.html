<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Lista de Tareas</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
     <style>
        .card {
            width: 100%;
            height: 100%;
        }

        .card img {
            height: 150px;
            object-fit: cover;
        }

        .card-body {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 100%;
        }

        .card-text {
            flex-grow: 1;
        }

        .btn-container {
            display: flex;
            justify-content: space-between;
        }
    </style>
</head>

<body>
     <div class="container">
        <h1>Tareas</h1>

        <form th:action="@{/sesion/guardar}" th:object="${sesion}" method="post">
			<div class="form-row" style="display: none;">
						<div class="form-group col-md-3">
							<label for="nombre">Nombre:</label>
							<input type="text" class="form-control" id="nombre" name="nombre" placeholder="Nombre"
								th:field="*{nombre}" required>
						</div>
						<div class="form-group col-md-3">
							<label for="fecha">Fecha de la Sesión:</label>
							<input type="date" class="form-control" id="fecha" name="fecha" th:field="*{fecha}"
								required>
						</div>
						<div class="form-group col-md-3">
							<label for="numJugadores">Número de Jugadores:</label>
							<select id="numJugadores" th:field="*{numJugadores}" class="form-control"
								name="numJugadores" required>
								<option value="5">5</option>
								<option value="6">6</option>
								<option value="7">7</option>
								<option value="8">8</option>
								<option value="9">9</option>
								<option value="10">10</option>
								<option value="11">11</option>
								<option value="12">12</option>
								<option value="13">13</option>
								<option value="14">14</option>
								<option value="15">15</option>
								<option value="16">16</option>
								<option value="17">17</option>
								<option value="18">18</option>
								<option value="19">19</option>
								<option value="20">20</option>
								<option value="21">21</option>
								<option value="22">22</option>
								<option value="23">23</option>
								<option value="24">24</option>
								<option value="25">25</option>
								<option value="26">26</option>
								<option value="27">27</option>
								<option value="28">28</option>
								<option value="29">29</option>
								<option value="30">30</option>
							</select>
						</div>
						<div class="form-group col-md-3">
							<label for="contenidoTecnico">Contenido Técnico:</label>
							<select id="contenidoTecnico" th:field="*{contenidoTecnico}" class="form-control" required>
								<option value="Conduccion">Conduccion</option>
								<option value="Acoso">Acoso</option>
								<option value="Regate">Regate</option>
								<option value="Cobretura">Cobretura</option>
								<option value="Protección">Protección</option>
								<option value="Rechaze">Rechaze</option>
								<option value="Control">Control</option>
								<option value="Pase">Pase</option>
								<option value="Apoyo">Apoyo</option>
								<option value="Marcage">Marcage</option>
								<option value="Amplitud">Amplitud</option>
								<option value="Profundidad">Profundidad</option>
								<option value="Desmarque">Desmarque</option>
								<option value="Tiro">Tiro</option>
								<option value="Centro">Centro</option>
								<option value="Remate">Remate</option>
								<option value="sc">Sin contenido</option>
							</select>
						</div>
					</div>
					<br><br>
            <div class="row">
                <div class="col-md-3" th:each="tarea : ${tareas}">
                    <div class="card mb-4">
                        <img src="/src/main/resources/templates/img/ControlesEsp.png" class="card-img-top" alt="...">
                        <div class="card-body">
                            <h5 class="card-title" th:text="${tarea.codigo}"></h5>
                            <p class="card-text" th:text="${tarea.descripcion}">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                            <a th:href="@{/tareas/{codigo}(codigo=${tarea.codigo})}" class="btn btn-info btn-sm">Ver Detalles</a>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" th:value="${tarea.id}" name="tareaIds">
                                <label class="form-check-label">
                                    Añadir a la sesión
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <button type="submit" class="btn btn-primary">Guardar Sesión</button>
        </form>
    </div>
</body>
    <!-- Paginador -->
        <nav aria-label="Page navigation">
            <ul class="pagination justify-content-center">
                <li class="page-item" id="prev-page"><a class="page-link" href="#">Anterior</a></li>
                <li class="page-item" id="next-page"><a class="page-link" href="#">Siguiente</a></li>
            </ul>
        </nav>

        <!-- Enlace para crear una nueva tarea -->
        <a th:href="@{/tareas/nueva}" class="btn btn-primary">Nueva Tarea</a>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const tareas = [
                /* Aquí debes incluir tus datos de tareas en formato JSON */
                { codigo: 'T1', descripcion: 'Descripción de la tarea 1' },
                { codigo: 'T2', descripcion: 'Descripción de la tarea 2' },
                { codigo: 'T3', descripcion: 'Descripción de la tarea 3' },
                { codigo: 'T4', descripcion: 'Descripción de la tarea 4' },
                { codigo: 'T5', descripcion: 'Descripción de la tarea 5' },
                { codigo: 'T6', descripcion: 'Descripción de la tarea 6' },
                { codigo: 'T7', descripcion: 'Descripción de la tarea 7' },
                { codigo: 'T8', descripcion: 'Descripción de la tarea 8' },
                { codigo: 'T9', descripcion: 'Descripción de la tarea 9' },
                { codigo: 'T10', descripcion: 'Descripción de la tarea 10' },
                /* ...más tareas... */
            ];

            const tasksPerPage = 8;
            let currentPage = 1;

            function displayTasks(page) {
                const taskContainer = document.getElementById("task-container");
                taskContainer.innerHTML = "";

                const start = (page - 1) * tasksPerPage;
                const end = start + tasksPerPage;
                const paginatedTasks = tareas.slice(start, end);

                paginatedTasks.forEach(tarea => {
                    const taskCard = document.createElement("div");
                    taskCard.className = "col-md-3 mb-4";
                    taskCard.innerHTML = `
                        <div class="card">
                            <img src="/src/main/resources/templates/img/ControlesEsp.png" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h5 class="card-title">${tarea.codigo}</h5>
                                <p class="card-text">${tarea.descripcion}</p>
                                <div class="btn-container">
                                    <a href="#" class="btn btn-primary">Go somewhere</a>
                                    <a href="/tareas/${tarea.codigo}" class="btn btn-info btn-sm">Ver Detalles</a>
                                </div>
                            </div>
                        </div>
                    `;
                    taskContainer.appendChild(taskCard);
                });

                document.getElementById("prev-page").classList.toggle("disabled", page === 1);
                document.getElementById("next-page").classList.toggle("disabled", end >= tareas.length);
            }

            document.getElementById("prev-page").addEventListener("click", function (e) {
                e.preventDefault();
                if (currentPage > 1) {
                    currentPage--;
                    displayTasks(currentPage);
                }
            });

            document.getElementById("next-page").addEventListener("click", function (e) {
                e.preventDefault();
                if (currentPage * tasksPerPage < tareas.length) {
                    currentPage++;
                    displayTasks(currentPage);
                }
            });

            displayTasks(currentPage);
        });
    </script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

</html>
